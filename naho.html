<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÛ•Ù…Û Ø¦Û•Ø±Ú©ÛÙ† Ù†Û•Ø­ÙˆÛ</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #27ae60;
            --bg-color: #f5f6fa;
            --text-color: #2c3e50;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .header-inputs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        input, select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            width: 100%;
            box-sizing: border-box;
        }

        .verse-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            position: relative;
        }

        .verse-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .grid-inputs {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        @media (max-width: 600px) {
            .grid-inputs {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .label-input {
            display: flex;
            flex-direction: column;
            font-size: 0.9rem;
        }
        
        .label-input label {
            margin-bottom: 5px;
            font-size: 0.8rem;
            color: #7f8c8d;
        }

        .btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            margin-bottom: 10px;
            transition: background 0.3s;
        }

        .btn:hover {
            background-color: #219150;
        }

        .btn-delete {
            background-color: #e74c3c;
            width: auto;
            padding: 5px 10px;
            font-size: 12px;
        }

        .result-area {
            margin-top: 20px;
            border-top: 2px solid #eee;
            padding-top: 20px;
        }

        textarea {
            width: 100%;
            height: 200px;
            padding: 10px;
            direction: rtl;
            font-family: monospace;
            border-radius: 8px;
            border: 1px solid #ddd;
            resize: vertical;
        }

        .copy-btn {
            background-color: #3498db;
            margin-top: 10px;
        }

        .legend {
            font-size: 0.8rem;
            color: #7f8c8d;
            text-align: center;
            margin-bottom: 15px;
            background: #ecf0f1;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ“ Ø³ÛŒØ³ØªÛ•Ù…Û Ø´ÛŒÚ©Ø§Ø±Ú©Ø±Ù†Ø§ Ø¦Ø§ÛŒÛ•ØªØ§Ù† (Ù†Û•Ø­Ùˆ)</h1>
    
    <div class="header-inputs">
        <input type="text" id="studentName" placeholder="Ù†Ø§Ú¤Û Ù‚ÙˆØªØ§Ø¨ÛŒ">
        <input type="text" id="surahName" value="Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø©" placeholder="Ù†Ø§Ú¤Û Ø³ÙˆØ±Û•ØªÛ">
    </div>

    <div class="legend">
        Ø±ÛØ²Ø¨Û•Ù†Ø¯ÛŒ: Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª - Ø§Ø³Ù… - ÙØ¹Ù„ Ù…Ø§Ø¶ÙŠ - ÙØ¹Ù„ Ù…Ø¶Ø§Ø±Ø¹ - ÙØ¹Ù„ Ø£Ù…Ø± - Ø­Ø±Ù
    </div>

    <div id="verses-container">
        <!-- Ø¦Ø§ÛŒÛ•Øª Ø¯Û Ù„ÛØ±Û• Ø²ÛŒØ§Ø¯ Ø¨Ù† -->
    </div>

    <button class="btn" onclick="addVerse()">+ Ø¦Ø§ÛŒÛ•ØªÛ•Ú©Ø§ Ø¯ÛŒ Ø²ÛŒØ§Ø¯ Ø¨Ú©Û•</button>
    <button class="btn" style="background-color: #34495e;" onclick="generateReport()">Ú©Û†Ù…Ú©Ø±Ù†Ø§ Ø±Ø§Ù¾ÙˆØ±ØªÛ</button>

    <div class="result-area" id="resultSection" style="display:none;">
        <h3>Ø¦Û•Ù†Ø¬Ø§Ù…:</h3>
        <textarea id="finalOutput"></textarea>
        <button class="btn copy-btn" onclick="copyToClipboard()">ğŸ“‹ Ú©Û†Ù¾ÛŒÚ©Ø±Ù†Ø§ Ø¦Û•Ù†Ø¬Ø§Ù…ÛŒ</button>
    </div>
</div>

<script>
    let verseCount = 0;
    let lastVerseNum = 0; // Ø¨Ùˆ Ø¯Û•Ø³ØªÙ¾ÛÚ©Ø±Ù†Û

    // ÙÛ•Ù†Ú©Ø´Ù† Ø¨Ùˆ Ø²ÛŒØ§Ø¯Ú©Ø±Ù†Ø§ Ø¦Ø§ÛŒÛ•ØªÛ•Ú©Ø§ Ù†ÙˆÛŒ
    function addVerse() {
        verseCount++;
        // Ø¦Û•Ú¯Û•Ø± Ø¦Ø§ÛŒÛ•ØªÛ•Ú© Ù‡Û•Ø¨ÛŒØªØŒ Ú˜Ù…Ø§Ø±Ø§ ÙˆÛ Ø¨ÛŒÙ†Û• Ùˆ Ø¦ÛÚ©Û Ø³Û•Ø± Ø²ÛŒØ§Ø¯ Ø¨Ú©Û•
        if (verseCount > 1) {
            const lastInput = document.getElementById(`v-num-${verseCount-1}`);
            if(lastInput) lastVerseNum = parseInt(lastInput.value);
        } else {
             // Ø¯Û•Ø³ØªÙ¾ÛÚ©
             lastVerseNum = 4; // Default start previous to 5
        }

        let currentVerseNum = lastVerseNum + 1;

        const container = document.getElementById('verses-container');
        const div = document.createElement('div');
        div.className = 'verse-card';
        div.id = `card-${verseCount}`;
        
        div.innerHTML = `
            <div class="verse-header">
                <span>ØªÙˆÙ…Ø§Ø±Ø§ Ù†ÙˆÛŒ</span>
                <button class="btn btn-delete" onclick="removeVerse(${verseCount})">Ú˜ÛØ¨Ø±Ù† X</button>
            </div>
            <div class="grid-inputs">
                <div class="label-input">
                    <label>Ú˜Ù…Ø§Ø±Ø§ Ø¦Ø§ÛŒÛ•ØªÛ</label>
                    <input type="number" id="v-num-${verseCount}" value="${currentVerseNum}">
                </div>
                <div class="label-input">
                    <label>Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª</label>
                    <input type="number" class="data-input" id="v-total-${verseCount}" placeholder="0">
                </div>
                <div class="label-input">
                    <label>Ø§Ø³Ù…</label>
                    <input type="number" class="data-input" id="v-noun-${verseCount}" placeholder="0">
                </div>
                <div class="label-input">
                    <label>ÙØ¹Ù„ Ù…Ø§Ø¶ÙŠ</label>
                    <input type="number" class="data-input" id="v-past-${verseCount}" placeholder="0">
                </div>
                <div class="label-input">
                    <label>ÙØ¹Ù„ Ù…Ø¶Ø§Ø±Ø¹</label>
                    <input type="number" class="data-input" id="v-present-${verseCount}" placeholder="0">
                </div>
                <div class="label-input">
                    <label>ÙØ¹Ù„ Ø£Ù…Ø±</label>
                    <input type="number" class="data-input" id="v-command-${verseCount}" placeholder="0">
                </div>
                <div class="label-input">
                    <label>Ø­Ø±Ù</label>
                    <input type="number" class="data-input" id="v-particle-${verseCount}" placeholder="0">
                </div>
            </div>
        `;
        container.appendChild(div);
    }

    function removeVerse(id) {
        const element = document.getElementById(`card-${id}`);
        element.remove();
    }

    function generateReport() {
        const studentName = document.getElementById('studentName').value;
        const surahName = document.getElementById('surahName').value;
        const cards = document.getElementsByClassName('verse-card');
        
        let report = `Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ… Ù…Ø§Ù…ÙˆØ³ØªØ§\n`;
        if(studentName) report += `Ù†Ø§Ú¤Û Ù‚ÙˆØªØ§Ø¨ÛŒ: ${studentName}\n`;
        report += `Ø¦Û•Ø±Ú©Û Ø´ÛŒÚ©Ø§Ø±Ú©Ø±Ù†Ø§ ( ${surahName} )\n`;
        report += `-----------------------------\n`;
        report += `Ø§Ù„ØªØ±ØªÛŒØ¨: Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª - Ø§Ø³Ù… - ÙØ¹Ù„ Ù…Ø§Ø¶ÙŠ - ÙØ¹Ù„ Ù…Ø¶Ø§Ø±Ø¹ - ÙØ¹Ù„ Ø£Ù…Ø± - Ø­Ø±Ù\n`;
        report += `-----------------------------\n\n`;

        for (let i = 0; i < cards.length; i++) {
            // We need to find inputs inside this specific card
            const card = cards[i];
            const vNum = card.querySelector('input[id^="v-num"]').value;
            
            // Getting values, defaulting to 0 if empty
            const total = card.querySelector('input[id^="v-total"]').value || 0;
            const noun = card.querySelector('input[id^="v-noun"]').value || 0;
            const past = card.querySelector('input[id^="v-past"]').value || 0;
            const present = card.querySelector('input[id^="v-present"]').value || 0;
            const command = card.querySelector('input[id^="v-command"]').value || 0;
            const particle = card.querySelector('input[id^="v-particle"]').value || 0;

            // Converting numbers to Arabic numerals implies standard digits are fine, 
            // but usually in text format standard digits (1,2,3) are accepted. 
            // Let's keep it clean format:
            // Ø§Ù„Ø¢ÙŠØ© Ù¥ : Ù¡Ù¢ - Ù§ - Ù  - Ù  - Ù  - Ù¥
            
            report += `Ø§Ù„Ø¢ÙŠØ© ${vNum} : ${total} - ${noun} - ${past} - ${present} - ${command} - ${particle}\n`;
        }

        document.getElementById('finalOutput').value = report;
        document.getElementById('resultSection').style.display = 'block';
        
        // Scroll to result
        document.getElementById('resultSection').scrollIntoView({behavior: "smooth"});
    }

    function copyToClipboard() {
        const copyText = document.getElementById("finalOutput");
        copyText.select();
        copyText.setSelectionRange(0, 99999); 
        navigator.clipboard.writeText(copyText.value).then(() => {
            alert("ØªÙ… Ø§Ù„Ù†Ø³Ø® Ø¨Ù†Ø¬Ø§Ø­! Ù†ÙˆÚ©Û• Ø¯Ø´ÛÛŒ Ø¨Û† Ù…Ø§Ù…ÙˆØ³ØªØ§ÛŒ ÙØ±ÛÚ©Û•ÛŒ.");
        });
    }

    // Add first verse automatically on load
    window.onload = addVerse;
</script>

</body>
</html>
